# 03. å±•ç¤ºå±‚ä¸ç‰¹å¾å±‚åˆ†æ

## ğŸ¯ åˆ†æç›®æ ‡

åŸºäºFoundation Agentsé¡¹ç›®çš„å®é™…ä»£ç ï¼Œæ·±å…¥åˆ†æå±•ç¤ºå±‚ä¸ç‰¹å¾å±‚çš„æ¶æ„è®¾è®¡ã€è¦ç´ ç»„æˆã€è¿æ¥å…³ç³»å’Œå»ºæ¨¡é‡ç‚¹ï¼Œä¸ºåç»­çš„åŠŸèƒ½æ‰©å±•å’Œæ¶æ„ä¼˜åŒ–æä¾›æŒ‡å¯¼ã€‚

## ğŸ—ï¸ å½“å‰é¡¹ç›®æ¶æ„åˆ†æ

### é¡¹ç›®ç»“æ„æ¦‚è§ˆ
```
Foundation Agents
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ core/           # æ ¸å¿ƒå±‚
â”‚   â”œâ”€â”€ features/       # ç‰¹å¾å±‚
â”‚   â”‚   â””â”€â”€ home/       # é¦–é¡µç‰¹å¾
â”‚   â””â”€â”€ l10n/          # å›½é™…åŒ–
â””â”€â”€ test/               # æµ‹è¯•å±‚
```

### æ¶æ„å±‚æ¬¡å…³ç³»
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                Foundation Agents System                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ¨ UIå±‚ (Presentation)     ğŸ§  ä¸šåŠ¡å±‚ (Domain)            â”‚
â”‚  ğŸ“Š æ•°æ®å±‚ (Data)           ğŸ”§ æ ¸å¿ƒå±‚ (Core)               â”‚
â”‚  ğŸ›¡ï¸ ä¾èµ–æ³¨å…¥ (DI)          ğŸ§ª æµ‹è¯•å±‚ (Testing)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¨ å±•ç¤ºå±‚ (Presentation Layer) å»ºæ¨¡è¦ç´ 

### 1. **é¡µé¢çº§è¦ç´  (Page-Level Elements)**

#### æ ¸å¿ƒè¦ç´ 
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å±•ç¤ºå±‚é¡µé¢è¦ç´                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“„ é¡µé¢å®¹å™¨ (Page Container)    ğŸ¯ é¡µé¢æ ‡é¢˜ (Page Title)    â”‚
â”‚  ğŸ”˜ é¡µé¢æ“ä½œ (Page Actions)      ğŸ“ é¡µé¢å¸ƒå±€ (Page Layout)   â”‚
â”‚  ğŸ¨ é¡µé¢ä¸»é¢˜ (Page Theme)        ğŸ“Š é¡µé¢çŠ¶æ€ (Page State)    â”‚
â”‚  ğŸ”„ é¡µé¢å¯¼èˆª (Page Navigation)   âš™ï¸ é¡µé¢é…ç½® (Page Config)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### å…·ä½“å®ç°åˆ†æ

**HomePageç»„ä»¶**:
```dart
class HomePage extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: const Text('Foundation Agents'),
        actions: [
          IconButton(
            icon: const Icon(Icons.refresh),
            onPressed: () {
              context.read<HomeBloc>().add(const RefreshHomeData());
            },
          ),
        ],
      ),
      body: const HomeView(),
      floatingActionButton: FloatingActionButton(
        onPressed: () => _showMessageDialog(context),
        child: const Icon(Icons.edit),
      ),
    );
  }
}
```

**é¡µé¢çŠ¶æ€ç®¡ç†**:
- é€šè¿‡BLoCç®¡ç†é¡µé¢çŠ¶æ€
- æ”¯æŒåˆ·æ–°ã€ç¼–è¾‘ç­‰ç”¨æˆ·äº¤äº’
- é›†æˆMaterial Designç»„ä»¶

**ç”¨æˆ·äº¤äº’**:
- åˆ·æ–°æŒ‰é’®ï¼šè§¦å‘æ•°æ®åˆ·æ–°
- ç¼–è¾‘æŒ‰é’®ï¼šæ‰“å¼€æ¶ˆæ¯ç¼–è¾‘å¯¹è¯æ¡†
- å“åº”å¼å¸ƒå±€ï¼šé€‚é…ä¸åŒå±å¹•å°ºå¯¸

### 2. **ç»„ä»¶çº§è¦ç´  (Widget-Level Elements)**

#### æ ¸å¿ƒè¦ç´ 
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å±•ç¤ºå±‚ç»„ä»¶è¦ç´                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ§© ä¸šåŠ¡ç»„ä»¶ (Business Widgets)   ğŸ”§ é€šç”¨ç»„ä»¶ (Common Widgets) â”‚
â”‚  ğŸ“Š æ•°æ®å±•ç¤ºç»„ä»¶ (Data Widgets)    ğŸ¨ è£…é¥°ç»„ä»¶ (Decoration Widgets) â”‚
â”‚  ğŸ”˜ äº¤äº’ç»„ä»¶ (Interactive Widgets) ğŸ“± å¸ƒå±€ç»„ä»¶ (Layout Widgets)    â”‚
â”‚  ğŸ“ˆ çŠ¶æ€ç»„ä»¶ (State Widgets)       ğŸ” å¯¼èˆªç»„ä»¶ (Navigation Widgets) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### å…·ä½“å®ç°åˆ†æ

**HomeWidgetä¸šåŠ¡ç»„ä»¶**:
```dart
class HomeWidget extends StatelessWidget {
  final HomeEntity homeEntity;
  
  @override
  Widget build(BuildContext context) {
    return CommonCard(
      child: Column(
        crossAxisAlignment: CrossAxisAlignment.start,
        children: [
          Text(homeEntity.title, style: Theme.of(context).textTheme.headlineMedium),
          Text(homeEntity.message),
          Text('åˆ›å»ºæ—¶é—´: ${homeEntity.createdAt}'),
        ],
      ),
    );
  }
}
```

**CommonWidgetsé€šç”¨ç»„ä»¶åº“**:
- **CommonLoadingIndicator**: åŠ è½½çŠ¶æ€æŒ‡ç¤ºå™¨
- **CommonErrorWidget**: é”™è¯¯çŠ¶æ€æ˜¾ç¤ºç»„ä»¶
- **CommonEmptyWidget**: ç©ºçŠ¶æ€æ˜¾ç¤ºç»„ä»¶
- **CommonCard**: é€šç”¨å¡ç‰‡å®¹å™¨ç»„ä»¶
- **CommonDivider**: é€šç”¨åˆ†éš”çº¿ç»„ä»¶

**çŠ¶æ€ç»„ä»¶**:
- æ ¹æ®BLoCçŠ¶æ€è‡ªåŠ¨æ˜¾ç¤ºä¸åŒUI
- æ”¯æŒåŠ è½½ã€æˆåŠŸã€é”™è¯¯ç­‰çŠ¶æ€
- æä¾›é‡è¯•ã€åˆ·æ–°ç­‰æ“ä½œåŠŸèƒ½

### 3. **çŠ¶æ€ç®¡ç†è¦ç´  (State Management Elements)**

#### æ ¸å¿ƒè¦ç´ 
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å±•ç¤ºå±‚çŠ¶æ€è¦ç´                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ¯ åˆå§‹çŠ¶æ€ (Initial State)      ğŸ“¥ åŠ è½½çŠ¶æ€ (Loading State) â”‚
â”‚  âœ… æˆåŠŸçŠ¶æ€ (Success State)       âŒ é”™è¯¯çŠ¶æ€ (Error State)   â”‚
â”‚  ğŸ”„ åˆ·æ–°çŠ¶æ€ (Refresh State)       ğŸ“ ç¼–è¾‘çŠ¶æ€ (Edit State)    â”‚
â”‚  ğŸ’¤ ç©ºé—²çŠ¶æ€ (Idle State)          ğŸ”„ åŒæ­¥çŠ¶æ€ (Sync State)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### å…·ä½“å®ç°åˆ†æ

**HomeBlocçŠ¶æ€ç®¡ç†**:
```dart
// äº‹ä»¶å®šä¹‰
abstract class HomeEvent extends Equatable {
  const HomeEvent();
}

class LoadHomeData extends HomeEvent {
  final String? customMessage;
  const LoadHomeData({this.customMessage});
}

// çŠ¶æ€å®šä¹‰
abstract class HomeState extends Equatable {
  const HomeState();
}

class HomeInitial extends HomeState {}
class HomeLoading extends HomeState {}
class HomeLoaded extends HomeState {
  final HomeEntity homeEntity;
  const HomeLoaded(this.homeEntity);
}
class HomeError extends HomeState {
  final String message;
  const HomeError(this.message);
}
```

**çŠ¶æ€è½¬æ¢æµç¨‹**:
```
LoadHomeData â†’ HomeLoading â†’ HomeLoaded/HomeError
RefreshHomeData â†’ HomeLoading â†’ HomeLoaded/HomeError
UpdateHomeMessage â†’ HomeLoaded (ç›´æ¥æ›´æ–°)
```

**çŠ¶æ€å“åº”æœºåˆ¶**:
- UIæ ¹æ®çŠ¶æ€è‡ªåŠ¨æ›´æ–°
- æ”¯æŒçŠ¶æ€æŒä¹…åŒ–å’Œæ¢å¤
- æä¾›çŠ¶æ€å˜åŒ–çš„å†å²è®°å½•

## ğŸ§  ç‰¹å¾å±‚ (Feature Layer) å»ºæ¨¡è¦ç´ 

### 1. **ä¸šåŠ¡å®ä½“è¦ç´  (Business Entity Elements)**

#### æ ¸å¿ƒè¦ç´ 
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ç‰¹å¾å±‚å®ä½“è¦ç´                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ†” å®ä½“æ ‡è¯† (Entity ID)          ğŸ“ å®ä½“å±æ€§ (Entity Properties) â”‚
â”‚  ğŸ”„ å®ä½“çŠ¶æ€ (Entity State)       ğŸ“… å®ä½“æ—¶é—´ (Entity Timestamp) â”‚
â”‚  ğŸ”— å®ä½“å…³ç³» (Entity Relations)   âœ… å®ä½“éªŒè¯ (Entity Validation) â”‚
â”‚  ğŸ“Š å®ä½“æ•°æ® (Entity Data)        ğŸ”’ å®ä½“æƒé™ (Entity Permissions) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### å…·ä½“å®ç°åˆ†æ

**HomeEntityä¸šåŠ¡å®ä½“**:
```dart
class HomeEntity extends Equatable {
  final String id;
  final String title;
  final String message;
  final DateTime createdAt;
  final bool isActive;
  
  const HomeEntity({
    required this.id,
    required this.title,
    required this.message,
    required this.createdAt,
    required this.isActive,
  });
  
  // å·¥å‚æ„é€ å‡½æ•°
  factory HomeEntity.defaultHome() {
    return const HomeEntity(
      id: 'default',
      title: 'æ¬¢è¿ä½¿ç”¨',
      message: 'Hello World! è¿™æ˜¯ä¸€ä¸ªåŸºäºClean Architectureå’ŒBLoCæ¨¡å¼çš„Flutteråº”ç”¨ã€‚',
      createdAt: null,
      isActive: true,
    );
  }
  
  // å¤åˆ¶å¹¶ä¿®æ”¹æ–¹æ³•
  HomeEntity copyWith({
    String? id, String? title, String? message,
    DateTime? createdAt, bool? isActive,
  }) {
    return HomeEntity(
      id: id ?? this.id,
      title: title ?? this.title,
      message: message ?? this.message,
      createdAt: createdAt ?? this.createdAt,
      isActive: isActive ?? this.isActive,
    );
  }
}
```

**å®ä½“ç‰¹æ€§**:
- **ä¸å¯å˜æ€§**: æ‰€æœ‰å±æ€§éƒ½æ˜¯finalï¼Œç¡®ä¿æ•°æ®ä¸€è‡´æ€§
- **å€¼ç›¸ç­‰æ€§**: ç»§æ‰¿Equatableï¼Œæ”¯æŒå€¼æ¯”è¾ƒ
- **å·¥å‚æ–¹æ³•**: æä¾›ä¾¿æ·çš„åˆ›å»ºæ–¹æ³•
- **å¤åˆ¶æ–¹æ³•**: æ”¯æŒä¸å¯å˜å¯¹è±¡çš„ä¿®æ”¹

### 2. **ä¸šåŠ¡é€»è¾‘è¦ç´  (Business Logic Elements)**

#### æ ¸å¿ƒè¦ç´ 
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ç‰¹å¾å±‚é€»è¾‘è¦ç´                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ¯ ç”¨ä¾‹ (Use Cases)              ğŸ”„ ä¸šåŠ¡è§„åˆ™ (Business Rules) â”‚
â”‚  ğŸ“Š æ•°æ®è½¬æ¢ (Data Transformation) ğŸ§® è®¡ç®—é€»è¾‘ (Calculation Logic) â”‚
â”‚  ğŸ” æŸ¥è¯¢é€»è¾‘ (Query Logic)         ğŸ”„ æ›´æ–°é€»è¾‘ (Update Logic)    â”‚
â”‚  âœ… éªŒè¯é€»è¾‘ (Validation Logic)    ğŸ”’ æƒé™é€»è¾‘ (Permission Logic) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### å…·ä½“å®ç°åˆ†æ

**GetHomeMessageç”¨ä¾‹**:
```dart
class GetHomeMessage {
  final HomeRepository repository;
  
  GetHomeMessage(this.repository);
  
  Future<Either<AppError, HomeEntity>> call(GetHomeMessageParams params) async {
    try {
      final result = await repository.getHomeData();
      return result.fold(
        (error) => Left(error),
        (data) => Right(data),
      );
    } catch (e, stackTrace) {
      return Left(ErrorHandler.handleException(e, stackTrace));
    }
  }
}

class GetHomeMessageParams {
  final String? customMessage;
  const GetHomeMessageParams({this.customMessage});
}
```

**ä¸šåŠ¡è§„åˆ™å®ç°**:
- **é”™è¯¯å¤„ç†**: ä½¿ç”¨Eitherç±»å‹å¤„ç†æˆåŠŸ/å¤±è´¥ç»“æœ
- **å‚æ•°éªŒè¯**: æ”¯æŒè‡ªå®šä¹‰æ¶ˆæ¯å‚æ•°
- **å¼‚å¸¸å¤„ç†**: ç»Ÿä¸€çš„å¼‚å¸¸å¤„ç†æœºåˆ¶
- **ç»“æœè½¬æ¢**: è‡ªåŠ¨å¤„ç†æ•°æ®è½¬æ¢å’Œé”™è¯¯ä¼ æ’­

### 3. **æ•°æ®è®¿é—®è¦ç´  (Data Access Elements)**

#### æ ¸å¿ƒè¦ç´ 
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ç‰¹å¾å±‚æ•°æ®è¦ç´                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“Š æ•°æ®æ¨¡å‹ (Data Models)        ğŸ”„ æ•°æ®ä»“åº“ (Data Repositories) â”‚
â”‚  ğŸŒ æ•°æ®æº (Data Sources)          ğŸ”— æ•°æ®æ¥å£ (Data Interfaces) â”‚
â”‚  ğŸ”„ æ•°æ®æ˜ å°„ (Data Mapping)        ğŸ§¹ æ•°æ®æ¸…ç† (Data Cleansing)   â”‚
â”‚  ğŸ”’ æ•°æ®å®‰å…¨ (Data Security)       ğŸ’¾ æ•°æ®ç¼“å­˜ (Data Caching)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### å…·ä½“å®ç°åˆ†æ

**HomeModelæ•°æ®æ¨¡å‹**:
```dart
class HomeModel extends Equatable {
  final String id;
  final String title;
  final String message;
  final DateTime createdAt;
  final bool isActive;
  
  const HomeModel({
    required this.id,
    required this.title,
    required this.message,
    required this.createdAt,
    required this.isActive,
  });
  
  // JSONåºåˆ—åŒ–
  factory HomeModel.fromJson(Map<String, dynamic> json) {
    return HomeModel(
      id: json['id'] as String,
      title: json['title'] as String,
      message: json['message'] as String,
      createdAt: DateTime.parse(json['createdAt'] as String),
      isActive: json['isActive'] as bool,
    );
  }
  
  Map<String, dynamic> toJson() {
    return {
      'id': id,
      'title': title,
      'message': message,
      'createdAt': createdAt.toIso8601String(),
      'isActive': isActive,
    };
  }
  
  // å®ä½“è½¬æ¢
  factory HomeModel.fromEntity(HomeEntity entity) {
    return HomeModel(
      id: entity.id,
      title: entity.title,
      message: entity.message,
      createdAt: entity.createdAt,
      isActive: entity.isActive,
    );
  }
  
  HomeEntity toEntity() {
    return HomeEntity(
      id: id,
      title: title,
      message: message,
      createdAt: createdAt,
      isActive: isActive,
    );
  }
}
```

**HomeRepositoryæ¥å£**:
```dart
abstract class HomeRepository {
  Future<Either<AppError, HomeEntity>> getHomeData();
  Future<Either<AppError, HomeEntity>> updateHomeData(HomeEntity entity);
  Future<Either<AppError, HomeEntity>> createHomeData(HomeEntity entity);
  Future<Either<AppError, bool>> deleteHomeData(String id);
  Future<Either<AppError, List<HomeEntity>>> getAllHomeData();
}
```

**æ•°æ®è®¿é—®å®ç°**:
- **æŠ½è±¡æ¥å£**: å®šä¹‰æ•°æ®è®¿é—®çš„æ ‡å‡†æ¥å£
- **å…·ä½“å®ç°**: æä¾›Mockæ•°æ®å®ç°ï¼ˆå¯æ‰©å±•ä¸ºçœŸå®æ•°æ®æºï¼‰
- **æ•°æ®è½¬æ¢**: æ”¯æŒEntity â†” Model â†” JSONçš„è½¬æ¢
- **é”™è¯¯å¤„ç†**: ç»Ÿä¸€çš„é”™è¯¯å¤„ç†æœºåˆ¶

## ğŸ”— å±•ç¤ºå±‚ä¸ç‰¹å¾å±‚çš„è¿æ¥è¦ç´ 

### 1. **äº‹ä»¶æµè¿æ¥ (Event Flow Connection)**

#### è¿æ¥æµç¨‹
```
ç”¨æˆ·æ“ä½œ â†’ UIç»„ä»¶ â†’ BLoCäº‹ä»¶ â†’ ç”¨ä¾‹ â†’ ä»“åº“ â†’ æ•°æ®æº
  â†“           â†“         â†“        â†“      â†“       â†“
UIæ›´æ–° â† çŠ¶æ€æ›´æ–° â† BLoCçŠ¶æ€ â† ç”¨ä¾‹ç»“æœ â† ä»“åº“ç»“æœ â† æ•°æ®ç»“æœ
```

#### å…·ä½“å®ç°
```dart
// 1. ç”¨æˆ·è§¦å‘æ“ä½œ
IconButton(
  onPressed: () {
    context.read<HomeBloc>().add(const RefreshHomeData());
  },
)

// 2. BLoCå¤„ç†äº‹ä»¶
on<RefreshHomeData>(_onRefreshHomeData);

// 3. è°ƒç”¨ç”¨ä¾‹
final result = await _getHomeMessage(params);

// 4. æ›´æ–°çŠ¶æ€
emit(HomeLoaded(homeEntity));
```

### 2. **æ•°æ®æµè¿æ¥ (Data Flow Connection)**

#### æ•°æ®æµå‘
```
UIçŠ¶æ€ â† BLoCçŠ¶æ€ â† ä¸šåŠ¡å®ä½“ â† æ•°æ®æ¨¡å‹ â† å¤–éƒ¨æ•°æ®
  â†“         â†“         â†“         â†“         â†“
UIæ¸²æŸ“ â† çŠ¶æ€å“åº” â† å®ä½“æ›´æ–° â† æ¨¡å‹è½¬æ¢ â† æ•°æ®è·å–
```

#### å…·ä½“å®ç°
```dart
// æ•°æ®è·å–æµç¨‹
Future<Either<AppError, HomeEntity>> getHomeData() async {
  // ä»æ•°æ®æºè·å–æ•°æ®
  final data = await _dataSource.getData();
  
  // è½¬æ¢ä¸ºModel
  final model = HomeModel.fromJson(data);
  
  // è½¬æ¢ä¸ºEntity
  return Right(model.toEntity());
}
```

### 3. **ä¾èµ–æ³¨å…¥è¿æ¥ (Dependency Injection Connection)**

#### ä¾èµ–å…³ç³»
```
UIå±‚ â† BLoC â† ç”¨ä¾‹ â† ä»“åº“ â† å¤–éƒ¨æœåŠ¡
  â†“      â†“      â†“      â†“       â†“
GetItå®¹å™¨ç®¡ç†æ‰€æœ‰ä¾èµ–å…³ç³»
```

#### å…·ä½“å®ç°
```dart
// ä¾èµ–æ³¨å…¥é…ç½®
void configureDependencies() {
  // æ³¨å†Œä»“åº“å®ç°
  getIt.registerLazySingleton<HomeRepository>(
    () => HomeRepositoryImpl(),
  );
  
  // æ³¨å†Œç”¨ä¾‹
  getIt.registerLazySingleton<GetHomeMessage>(
    () => GetHomeMessage(getIt<HomeRepository>()),
  );
  
  // æ³¨å†ŒBLoC
  getIt.registerFactory<HomeBloc>(
    () => HomeBloc(getIt<GetHomeMessage>()),
  );
}
```

## ğŸ’¡ å»ºæ¨¡é‡ç‚¹è€ƒè™‘è¦ç´ 

### 1. **å±•ç¤ºå±‚å»ºæ¨¡é‡ç‚¹**

#### çŠ¶æ€ä¸€è‡´æ€§
- **UIçŠ¶æ€ä¸ä¸šåŠ¡çŠ¶æ€åŒæ­¥**: ç¡®ä¿UIæ˜¾ç¤ºçš„æ•°æ®ä¸ä¸šåŠ¡é€»è¾‘ä¸€è‡´
- **çŠ¶æ€å˜åŒ–å“åº”**: UIèƒ½å¤ŸåŠæ—¶å“åº”çŠ¶æ€å˜åŒ–
- **çŠ¶æ€æŒä¹…åŒ–**: æ”¯æŒåº”ç”¨é‡å¯åçš„çŠ¶æ€æ¢å¤

#### ç”¨æˆ·äº¤äº’
- **äº‹ä»¶è§¦å‘æœºåˆ¶**: ç”¨æˆ·æ“ä½œå¦‚ä½•è½¬æ¢ä¸ºç³»ç»Ÿäº‹ä»¶
- **å“åº”å¼è®¾è®¡**: UIå¦‚ä½•å“åº”ç”¨æˆ·è¾“å…¥å’Œç³»ç»ŸçŠ¶æ€å˜åŒ–
- **äº¤äº’åé¦ˆ**: æä¾›é€‚å½“çš„è§†è§‰å’Œè§¦è§‰åé¦ˆ

#### ç»„ä»¶å¤ç”¨
- **é€šç”¨ç»„ä»¶è®¾è®¡**: åˆ›å»ºå¯å¤ç”¨çš„UIç»„ä»¶
- **ä¸šåŠ¡ç»„ä»¶å°è£…**: å°†ä¸šåŠ¡é€»è¾‘å°è£…åœ¨ä¸“ç”¨ç»„ä»¶ä¸­
- **ç»„ä»¶æ¥å£è®¾è®¡**: å®šä¹‰æ¸…æ™°çš„ç»„ä»¶æ¥å£å’Œå±æ€§

#### ä¸»é¢˜é€‚é…
- **Material 3é›†æˆ**: å……åˆ†åˆ©ç”¨Material Design 3çš„ç‰¹æ€§
- **ä¸»é¢˜åˆ‡æ¢**: æ”¯æŒæ˜æš—ä¸»é¢˜åˆ‡æ¢
- **è‡ªå®šä¹‰ä¸»é¢˜**: æ”¯æŒå“ç‰Œå®šåˆ¶å’Œä¸ªæ€§åŒ–

### 2. **ç‰¹å¾å±‚å»ºæ¨¡é‡ç‚¹**

#### ä¸šåŠ¡å®Œæ•´æ€§
- **å®ä½“å®Œæ•´æ€§**: ç¡®ä¿ä¸šåŠ¡å®ä½“çš„æ•°æ®å®Œæ•´æ€§
- **ä¸šåŠ¡è§„åˆ™å®Œæ•´æ€§**: å®ç°æ‰€æœ‰å¿…è¦çš„ä¸šåŠ¡è§„åˆ™
- **æµç¨‹å®Œæ•´æ€§**: æ”¯æŒå®Œæ•´çš„ä¸šåŠ¡æµç¨‹

#### æ•°æ®ä¸€è‡´æ€§
- **æ•°æ®æ¨¡å‹æ˜ å°„**: ç¡®ä¿å„å±‚æ•°æ®æ¨¡å‹çš„ä¸€è‡´æ€§
- **æ•°æ®éªŒè¯**: å®ç°æ•°æ®éªŒè¯å’Œæ¸…ç†é€»è¾‘
- **æ•°æ®åŒæ­¥**: æ”¯æŒå¤šæ•°æ®æºçš„æ•°æ®åŒæ­¥

#### æ‰©å±•æ€§
- **æ–°ç‰¹å¾æ·»åŠ **: æ–°åŠŸèƒ½æ˜“äºæ·»åŠ å’Œé›†æˆ
- **ç°æœ‰åŠŸèƒ½ä¿®æ”¹**: ç°æœ‰åŠŸèƒ½æ˜“äºä¿®æ”¹å’Œæ‰©å±•
- **æ¶æ„æ¼”è¿›**: æ”¯æŒæ¶æ„çš„æŒç»­æ¼”è¿›

#### æµ‹è¯•æ€§
- **ä¸šåŠ¡é€»è¾‘æµ‹è¯•**: ä¸šåŠ¡é€»è¾‘æ˜“äºå•å…ƒæµ‹è¯•
- **é›†æˆæµ‹è¯•**: æ”¯æŒå„å±‚ä¹‹é—´çš„é›†æˆæµ‹è¯•
- **æ¨¡æ‹Ÿæµ‹è¯•**: æ”¯æŒä¾èµ–çš„æ¨¡æ‹Ÿå’Œæ›¿æ¢

### 3. **å±‚é—´è¿æ¥å»ºæ¨¡é‡ç‚¹**

#### æ¾è€¦åˆ
- **æ¥å£ä¾èµ–**: å±‚é—´é€šè¿‡æ¥å£é€šä¿¡ï¼Œä¸ä¾èµ–å…·ä½“å®ç°
- **ä¾èµ–æ³¨å…¥**: ä½¿ç”¨ä¾èµ–æ³¨å…¥ç®¡ç†å¯¹è±¡ä¾èµ–å…³ç³»
- **äº‹ä»¶é©±åŠ¨**: é€šè¿‡äº‹ä»¶å®ç°å±‚é—´é€šä¿¡

#### æ•°æ®æµ
- **å•å‘æ•°æ®æµ**: ç¡®ä¿æ•°æ®æµçš„å•å‘æ€§å’Œå¯é¢„æµ‹æ€§
- **æ•°æ®è½¬æ¢**: åœ¨å„å±‚ä¹‹é—´è¿›è¡Œé€‚å½“çš„æ•°æ®è½¬æ¢
- **é”™è¯¯ä¼ æ’­**: ç»Ÿä¸€çš„é”™è¯¯å¤„ç†å’Œä¼ æ’­æœºåˆ¶

#### æ€§èƒ½ä¼˜åŒ–
- **çŠ¶æ€ç®¡ç†**: é«˜æ•ˆçš„çŠ¶æ€ç®¡ç†å’Œæ›´æ–°æœºåˆ¶
- **æ•°æ®ç¼“å­˜**: å®ç°é€‚å½“çš„æ•°æ®ç¼“å­˜ç­–ç•¥
- **å¼‚æ­¥å¤„ç†**: æ”¯æŒå¼‚æ­¥æ“ä½œå’Œå¹¶å‘å¤„ç†

## ğŸ” æ¶æ„ä¼˜åŠ¿åˆ†æ

### 1. **å¯ç»´æŠ¤æ€§**
- **æ¸…æ™°çš„ä»£ç ç»“æ„**: åˆ†å±‚æ˜ç¡®ï¼ŒèŒè´£æ¸…æ™°
- **èŒè´£åˆ†ç¦»**: æ¯ä¸ªç»„ä»¶åªè´Ÿè´£ç‰¹å®šåŠŸèƒ½
- **æ˜“äºç†è§£**: ä»£ç ç»“æ„ç›´è§‚ï¼Œæ˜“äºç†è§£

### 2. **å¯æµ‹è¯•æ€§**
- **ä¸šåŠ¡é€»è¾‘ç‹¬ç«‹**: ä¸šåŠ¡é€»è¾‘ä¸UIé€»è¾‘åˆ†ç¦»
- **ä¾èµ–æ³¨å…¥æ”¯æŒ**: ä¾¿äºæ¨¡æ‹Ÿå’Œæ›¿æ¢ä¾èµ–
- **å•å…ƒæµ‹è¯•å‹å¥½**: æ”¯æŒç»†ç²’åº¦çš„å•å…ƒæµ‹è¯•

### 3. **å¯æ‰©å±•æ€§**
- **æ–°åŠŸèƒ½æ˜“äºæ·»åŠ **: æ–°ç‰¹å¾å¯ä»¥ç‹¬ç«‹å¼€å‘å’Œé›†æˆ
- **ç°æœ‰åŠŸèƒ½æ˜“äºä¿®æ”¹**: ä¿®æ”¹å½±å“èŒƒå›´å¯æ§
- **æ¶æ„æ”¯æŒæ°´å¹³æ‰©å±•**: æ”¯æŒåŠŸèƒ½çš„æ°´å¹³æ‰©å±•

### 4. **å›¢é˜Ÿåä½œ**
- **ä»£ç åˆ†å·¥æ˜ç¡®**: ä¸åŒå¼€å‘è€…å¯ä»¥ä¸“æ³¨äºä¸åŒå±‚
- **æ¥å£å®šä¹‰æ¸…æ™°**: å±‚é—´æ¥å£æ˜ç¡®ï¼Œå‡å°‘å†²çª
- **å¹¶è¡Œå¼€å‘**: æ”¯æŒå¹¶è¡Œå¼€å‘å’Œé›†æˆ

## ğŸ“š å­¦ä¹ è¦ç‚¹æ€»ç»“

### æ ¸å¿ƒæ¦‚å¿µ
1. **åˆ†å±‚æ¶æ„**: ç†è§£Clean Architectureçš„åˆ†å±‚åŸåˆ™
2. **çŠ¶æ€ç®¡ç†**: æŒæ¡BLoCæ¨¡å¼çš„çŠ¶æ€ç®¡ç†æœºåˆ¶
3. **ä¾èµ–æ³¨å…¥**: å­¦ä¹ ä¾èµ–æ³¨å…¥çš„è®¾è®¡å’Œå®ç°
4. **æ•°æ®æµ**: ç†è§£æ•°æ®åœ¨ç³»ç»Ÿå„å±‚ä¹‹é—´çš„æµåŠ¨

### å®è·µåº”ç”¨
1. **æ¶æ„è®¾è®¡**: åŸºäºåˆ†æç»“æœè®¾è®¡æ–°ç‰¹å¾
2. **ä»£ç å®ç°**: æŒ‰ç…§æ¶æ„è§„èŒƒå®ç°åŠŸèƒ½
3. **æµ‹è¯•ç­–ç•¥**: åˆ¶å®šç›¸åº”çš„æµ‹è¯•ç­–ç•¥
4. **æ€§èƒ½ä¼˜åŒ–**: åŸºäºæ¶æ„ç‰¹ç‚¹è¿›è¡Œæ€§èƒ½ä¼˜åŒ–

### æŒç»­æ”¹è¿›
1. **æ¶æ„æ¼”è¿›**: æŒç»­ä¼˜åŒ–å’Œæ”¹è¿›æ¶æ„è®¾è®¡
2. **æœ€ä½³å®è·µ**: å­¦ä¹ å’Œåº”ç”¨æ–°çš„æœ€ä½³å®è·µ
3. **å·¥å…·åº”ç”¨**: æŒæ¡ç›¸å…³å·¥å…·å’Œæ¡†æ¶çš„ä½¿ç”¨
4. **ç»éªŒç§¯ç´¯**: åœ¨å®è·µä¸­ç§¯ç´¯æ¶æ„è®¾è®¡ç»éªŒ

## ğŸ”— ç›¸å…³èµ„æº

- [Flutterå®˜æ–¹æ–‡æ¡£](https://flutter.dev/docs)
- [BLoCå®˜æ–¹æ–‡æ¡£](https://bloclibrary.dev/)
- [Clean Architecture](https://blog.cleancoder.com/uncle-bob/2012/08/13/the-clean-architecture.html)
- [é¡¹ç›®ä»£ç ç¤ºä¾‹](./../..)

---

*è¿”å›ï¼š[å­¦ä¹ æ–‡æ¡£ç´¢å¼•](./README.md)*
